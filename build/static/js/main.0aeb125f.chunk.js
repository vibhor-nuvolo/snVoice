(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(32)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),l=(a(20),a(7)),i=a(1);a(21),a(22);function s(e,t){if(t)switch(t.state){case"blocked":return t.blocked.byPermissions?"".concat(e," permission denied"):t.blocked.byDeviceMissing?"".concat(e," device missing"):"".concat(e," blocked");case"off":return t.off.byUser?"".concat(e," muted"):t.off.byBandwidth?"".concat(e," muted to save bandwidth"):"".concat(e," off");case"sendable":return"".concat(e," not subscribed");case"loading":return"".concat(e," loading...");case"interrupted":return"".concat(e," interrupted");case"playable":return null}}function u(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null),c=Object(n.useMemo)((function(){return e.videoTrackState&&"playable"===e.videoTrackState.state?e.videoTrackState.track:null}),[e.videoTrackState]),o=Object(n.useMemo)((function(){return e.audioTrackState&&"playable"===e.audioTrackState.state?e.audioTrackState.track:null}),[e.audioTrackState]),l=Object(n.useMemo)((function(){return s("video",e.videoTrackState)}),[e.videoTrackState]),i=Object(n.useMemo)((function(){return s("audio",e.audioTrackState)}),[e.audioTrackState]);return Object(n.useEffect)((function(){t.current&&(t.current.srcObject=new MediaStream([c]))}),[c]),Object(n.useEffect)((function(){a.current&&(a.current.srcObject=new MediaStream([o]))}),[o]),r.a.createElement("div",{className:function(){var t="tile";return t+=e.isLarge?" large":" small",e.isLocalPerson&&(t+=" local"),t}(),onClick:e.onClick},r.a.createElement("div",{className:"background"}),l&&r.a.createElement("p",{className:"overlay"},l,i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),i)),c&&r.a.createElement("video",{autoPlay:!0,muted:!0,playsInline:!0,ref:t}),!e.isLocalPerson&&o&&r.a.createElement("audio",{autoPlay:!0,playsInline:!0,ref:a}),!e.disableCornerMessage&&i&&!l&&r.a.createElement("p",{className:"corner"},i))}var d=r.a.createContext();a(23);function f(e){return r.a.createElement("div",{className:"call-message"+(e.isError?" error":"")},r.a.createElement("p",{className:"call-message-header"},e.header),r.a.createElement("p",null,e.detail))}var m=a(2),p={callItems:{local:{videoTrackState:null,audioTrackState:null}},clickAllowTimeoutFired:!1,camOrMicError:null,fatalError:null};function b(e,t){switch(t.type){case"CLICK_ALLOW_TIMEOUT":return Object(m.a)(Object(m.a)({},e),{},{clickAllowTimeoutFired:!0});case"PARTICIPANTS_CHANGE":var a=function(e){for(var t=Object(m.a)({},p.callItems),a=0,n=Object.entries(e);a<n.length;a++){var r=Object(i.a)(n[a],2),c=r[0],o=r[1];t[c]={videoTrackState:o.tracks.video,audioTrackState:o.tracks.audio},h(o)&&(t[c+"-screen"]={videoTrackState:o.tracks.screenVideo,audioTrackState:o.tracks.screenAudio})}return t}(t.participants);return Object(m.a)(Object(m.a)({},e),{},{callItems:a});case"CAM_OR_MIC_ERROR":return Object(m.a)(Object(m.a)({},e),{},{camOrMicError:t.message});case"FATAL_ERROR":return Object(m.a)(Object(m.a)({},e),{},{fatalError:t.message});default:throw new Error}}function h(e){var t=["loading","playable","interrupted"];return t.includes(e.tracks.screenVideo.state)||t.includes(e.tracks.screenAudio.state)}function E(e){return"local"===e}function v(e){return e.endsWith("-screen")}function C(e){console.log("[daily.co event]",e.action)}function O(){var e=Object(n.useContext)(d),t=Object(n.useReducer)(b,p),a=Object(i.a)(t,2),c=a[0],o=a[1];Object(n.useEffect)((function(){if(e){var t=["participant-joined","participant-updated","participant-left"];c();for(var a=0,n=t;a<n.length;a++){var r=n[a];e.on(r,c)}return function(){var a,n=Object(l.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;e.off(r,c)}}catch(o){n.e(o)}finally{n.f()}}}function c(t){t&&C(t),o({type:"PARTICIPANTS_CHANGE",participants:e.participants()})}}),[e]),Object(n.useEffect)((function(){if(e)return e.on("camera-error",t),function(){e.off("camera-error",t)};function t(e){C(e),o({type:"CAM_OR_MIC_ERROR",message:e&&e.errorMsg&&e.errorMsg.errorMsg||"Unknown"})}}),[e]),Object(n.useEffect)((function(){if(e)return e.on("error",t),function(){e.off("error",t)};function t(e){C(e),o({type:"FATAL_ERROR",message:e&&e.errorMsg||"Unknown"})}}),[e]),Object(n.useEffect)((function(){var e=setTimeout((function(){o({type:"CLICK_ALLOW_TIMEOUT"})}),2500);return function(){clearTimeout(e)}}),[]);var s=Object(n.useCallback)((function(t){e&&e.sendAppMessage({hello:"world"},t)}),[e]);var m=function(){var e=[],t=[];return Object.entries(c.callItems).forEach((function(a){var n,o=Object(i.a)(a,2),l=o[0],d=o[1],f=v(l)||!E(l)&&(n=c.callItems,!Object.keys(n).some((function(e){return v(e)}))),m=r.a.createElement(u,{key:l,videoTrackState:d.videoTrackState,audioTrackState:d.audioTrackState,isLocalPerson:E(l),isLarge:f,disableCornerMessage:v(l),onClick:E(l)?null:function(){s(l)}});f?e.push(m):t.push(m)})),[e,t]}(),h=Object(i.a)(m,2),O=h[0],g=h[1],k=function(e){var t=null,a=null,n=!1;return e.fatalError?(t="Fatal error: ".concat(e.fatalError),n=!0):e.camOrMicError?(t="Camera or mic access error: ".concat(e.camOrMicError),a="See https://help.daily.co/en/articles/2528184-unblock-camera-mic-access-on-a-computer to troubleshoot.",n=!0):!function(){var t=e.callItems.local;return!(t&&!t.isLoading)&&e.clickAllowTimeoutFired}()?1===Object.keys(e.callItems).length&&(t="Copy and share this page's URL to invite others",a=window.location.href):t='Click "Allow" to enable camera and mic access',t||a?{header:t,detail:a,isError:n}:null}(c);return r.a.createElement("div",{className:"call"},r.a.createElement("div",{className:"large-tiles"},k?null:O),r.a.createElement("div",{className:"small-tiles"},g),k&&r.a.createElement(f,{header:k.header,detail:k.detail,isError:k.isError}))}a(24);function g(e){return r.a.createElement("button",{className:"start-button",disabled:e.disabled,onClick:e.onClick},"Click to start a call")}var k=a(10),j=a.n(k),S=a(14);"".concat(window.location.origin,"/api/rooms");function y(){return(y=Object(S.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{url:"https://snvoice.daily.co/kP9ad7SRasdidhN33nF8"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T={createRoom:function(){return y.apply(this,arguments)}};a(26),a(27),a(28);function L(e){function t(){return e.highlighted?"#fb5554":"#000000"}return r.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:e.className,xmlns:"http://www.w3.org/2000/svg"},function(){switch(e.type){case"camera":return r.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"Assets-for-Export",transform:"translate(-24.000000, 0.000000)",fill:t()},r.a.createElement("g",{id:"Icon-Camera-Off-24px",transform:"translate(24.000000, 0.000000)"},r.a.createElement("path",{d:"M13.7573593,6 L4.00585866,6 C2.89706013,6 2,6.8992496 2,8.0085302 L2,15.9914698 C2,16.4835828 2.17760958,16.9352259 2.47229113,17.2850682 L13.7573593,6 Z M16,12.2426407 L16,15.9914698 C16,17.1007504 15.1029399,18 13.9941413,18 L10.2426407,18 L16,12.2426407 Z M16,12.2426407 L16,14.499966 L21.0756492,16.6148096 C21.586154,16.8275189 22,16.5442917 22,16.0045612 L22,7.99539512 C22,7.44565489 21.5875957,7.17183667 21.0756492,7.38514669 L20.7016702,7.54097052 L16,12.2426407 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z",id:"Combined-Shape"}))));case"mute-mic":return r.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"Assets-for-Export",transform:"translate(-120.000000, 0.000000)",fill:t()},r.a.createElement("g",{id:"Icon-Microphone-Off-24px",transform:"translate(120.000000, 0.000000)"},r.a.createElement("path",{d:"M15.8931049,12.3495358 L15.8883757,12.354265 C15.7702192,12.7237203 15.5976472,13.0928313 15.3634551,13.4334743 C14.9080287,14.0959127 14.281481,14.5761112 13.4232304,14.8194102 L11,17.2426407 L11,18.9906311 C11,18.9937578 11.0000137,18.9968808 11.0000409,19 L9.99077797,19 C9.45097518,19 9,19.4477153 9,20 C9,20.5561352 9.44358641,21 9.99077797,21 L14.009222,21 C14.5490248,21 15,20.5522847 15,20 C15,19.4438648 14.5564136,19 14.009222,19 L12.9999626,19 C12.999986,18.9968804 13,18.9937574 13,18.9906311 L13,16.9383953 C14.793746,16.7093537 16.1268712,15.8533183 17.0115375,14.566531 C17.631941,13.6641258 17.9116422,12.769082 17.9922726,12.124039 C18.0567667,11.6080864 17.715976,11.1348845 17.2185349,11.0241058 L17.2162194,11.0264213 C17.1758852,11.0160463 17.1430789,11.0101085 17.12403,11.0077274 C16.5760096,10.9392248 16.076219,11.3279514 16.0077165,11.8759725 C15.9990827,11.9450424 15.9659776,12.1062504 15.8970768,12.3267333 C15.8944966,12.3349898 15.8931939,12.3425837 15.8931049,12.3495358 Z M14.8100942,4.94726512 C14.3837386,3.80970165 13.2864273,3 12,3 C10.3431458,3 9,4.34314575 9,6 L9,10.7573593 L14.8100942,4.94726512 Z M7.97590142,11.7814579 C7.86511978,11.2840207 7.39191988,10.9432336 6.87596978,11.0077274 C6.32795032,11.0762298 5.93922497,11.5760196 6.0077274,12.124039 C6.05291889,12.4855709 6.16064541,12.9256367 6.35584336,13.401516 L7.97590142,11.7814579 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z",id:"Combined-Shape"}))));case"screen":return r.a.createElement("path",{fill:t(),fillRule:"evenodd",d:"M2 5.006C2 3.898 2.898 3 3.99 3h16.02C21.108 3 22 3.897 22 5.006v9.988A2.003 2.003 0 0 1 20.01 17H3.99C2.892 17 2 16.103 2 14.994V5.006zm2 .99v8.009c0 .54.448.995 1 .995h14c.555 0 1-.446 1-.995v-8.01c0-.54-.448-.995-1-.995H5c-.555 0-1 .446-1 .995zM7 20c0-.552.456-1 .995-1h8.01c.55 0 .995.444.995 1 0 .552-.456 1-.995 1h-8.01A.995.995 0 0 1 7 20z"});case"leave":return r.a.createElement("path",{d:"M19.347 11l-1.71-1.638a.832.832 0 0 1 0-1.222l.03-.03a.922.922 0 0 1 1.27-.003l3.34 3.2a.95.95 0 0 1 0 1.386l-3.34 3.2a.918.918 0 0 1-1.27-.003l-.03-.03a.842.842 0 0 1 0-1.221L19.348 13h-7.352A.995.995 0 0 1 11 12c0-.552.456-1 .995-1h7.352zM16 10h-2V7.995c0-.54-.446-.995-.997-.995H6.997A1 1 0 0 0 6 7.995v8.01c0 .54.446.995.997.995h6.006a1 1 0 0 0 .997-.995V14h2v2.994A2.009 2.009 0 0 1 13.991 19H6.01A2.007 2.007 0 0 1 4 16.994V7.006C4 5.898 4.902 5 6.009 5h7.982C15.101 5 16 5.897 16 7.006V10z",fill:t(),fillRule:"evenodd"});case"chat":return r.a.createElement("path",{d:"M8.984 17.522c.93.308 1.949.478 3.016.478 4.418 0 8-2.91 8-6.5S16.418 5 12 5s-8 2.91-8 6.5c0 1.65.756 3.156 2.003 4.302a8.751 8.751 0 0 1-.71 2.187c-.317.606-.457 1.011 0 1.011 1.727 0 1.99-1.236 3.691-1.478z",fill:t(),fillRule:"evenodd"});default:throw new Error}}())}function w(e){return r.a.createElement("button",{disabled:e.disabled,onClick:e.onClick,className:"tray-button"+(e.newButtonGroup?" new-group":"")},r.a.createElement(L,{type:e.type,highlighted:e.highlighted}))}var A=a(11);a(29);function I(e){var t=Object(n.useContext)(d),a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)([]),u=Object(i.a)(s,2),f=u[0],m=u[1];return Object(n.useEffect)((function(){if(t)return t.on("app-message",a),function(){t.off("app-message",a)};function a(a){var n=t.participants(),r=n[a.fromId].user_name?n[a.fromId].user_name:"Guest";m([].concat(Object(A.a)(f),[{sender:r,message:a.data.message}])),e.notification()}}),[t,f]),Object(n.useEffect)((function(){}),[f]),e.onClickDisplay?r.a.createElement("div",{className:"chat"},f.map((function(e,t){return r.a.createElement("div",{key:"entry-".concat(t),className:"messageList"},r.a.createElement("b",null,e.sender),": ",e.message)})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.sendAppMessage({message:o},"*");var a=t.participants().local.user_name?t.participants().local.user_name:"Guest";m([].concat(Object(A.a)(f),[{sender:a,message:o}])),l("")}},r.a.createElement("label",{htmlFor:"chatInput"}),r.a.createElement("input",{id:"chatInput",className:"chat-input",type:"text",placeholder:"Type your message here..",value:o,onChange:function(e){l(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"send-chat-button"},"Send"))):null}var M=a(5);function R(e){var t=Object(n.useContext)(d),a=Object(n.useState)(!1),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(i.a)(s,2),f=u[0],m=u[1],p=Object(n.useState)(!1),b=Object(i.a)(p,2),h=b[0],E=b[1],v=Object(n.useState)(!1),O=Object(i.a)(v,2),g=O[0],k=O[1],j=Object(n.useState)(!1),S=Object(i.a)(j,2),y=S[0],T=S[1];return Object(n.useEffect)((function(){if(t)return e(),t.on("participant-updated",e),function(){t.off("participant-updated",e)};function e(e){e&&C(e);var a=function(e){var t,a,n=!1;if(e&&e.participants()&&e.participants().local){var r=e.participants().local;t=!r.video,a=!r.audio,n=r.screen}return[t,a,n]}(t),n=Object(i.a)(a,3),r=n[0],c=n[1],o=n[2];l(r),m(c),E(o)}}),[t]),r.a.createElement("div",{className:"tray"},r.a.createElement(w,{type:"camera",disabled:e.disabled,highlighted:o,onClick:function(){t.setLocalVideo(o)}}),r.a.createElement(w,{type:"mute-mic",disabled:e.disabled,highlighted:f,onClick:function(){t.setLocalAudio(f)}}),M.a.supportedBrowser().supportsScreenShare&&r.a.createElement(w,{type:"screen",disabled:e.disabled,highlighted:h,onClick:function(){h?t.stopScreenShare():t.startScreenShare()}}),r.a.createElement(w,{type:"chat",disabled:e.disabled,highlighted:y,onClick:function(){k(!g),y&&T(!y)}}),r.a.createElement(I,{onClickDisplay:g,notification:function(){T(!y)}}),r.a.createElement(w,{type:"leave",disabled:e.disabled,newButtonGroup:!0,highlighted:!0,onClick:function(){e.onClickLeaveCall&&e.onClickLeaveCall()}}))}var N="STATE_JOINING",_="STATE_JOINED",x="STATE_ERROR";function P(){var e=Object(n.useState)("STATE_IDLE"),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),s=Object(i.a)(o,2),u=s[0],f=s[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),b=p[0],h=p[1],E=Object(n.useCallback)((function(){return c("STATE_CREATING"),T.createRoom().then((function(e){return console.log("@@vibhor app",e),e.url})).catch((function(e){console.log("Error creating room",e),f(null),c("STATE_IDLE")}))}),[]),v=Object(n.useCallback)((function(e){var t=M.a.createCallObject();f(e),h(t),c(N),t.join({url:e})}),[]),k=Object(n.useCallback)((function(){b&&(a===x?b.destroy().then((function(){f(null),h(null),c("STATE_IDLE")})):(c("STATE_LEAVING"),b.leave()))}),[b,a]);Object(n.useEffect)((function(){var e=function(){var e=window.location.search.match(/roomUrl=([^&]+)/i);return e&&e[1]?decodeURIComponent(e[1]):null}();e&&v(e)}),[v]),Object(n.useEffect)((function(){var e=function(e){return window.location.href.split("?")[0]+(e?"?roomUrl=".concat(encodeURIComponent(e)):"")}(u);e!==window.location.href&&window.history.replaceState(null,null,e)}),[u]),Object(n.useEffect)((function(){if(b){var e=["joined-meeting","left-meeting","error"];r();for(var t=0,a=e;t<a.length;t++){var n=a[t];b.on(n,r)}return function(){var t,a=Object(l.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;b.off(n,r)}}catch(c){a.e(c)}finally{a.f()}}}function r(e){switch(e&&C(e),b.meetingState()){case"joined-meeting":c(_);break;case"left-meeting":b.destroy().then((function(){f(null),h(null),c("STATE_IDLE")}));break;case"error":c(x)}}}),[b]),Object(n.useEffect)((function(){if(b)return b.on("app-message",e),function(){b.off("app-message",e)};function e(e){e&&(C(e),console.log("received app message from ".concat(e.fromId,": "),e.data))}}),[b]);var j=[N,_,x].includes(a),S=[_,x].includes(a),y="STATE_IDLE"===a;return r.a.createElement("div",{className:"app"},j?r.a.createElement(d.Provider,{value:b},r.a.createElement(O,{roomUrl:u}),r.a.createElement(R,{disabled:!S,onClickLeaveCall:k})):r.a.createElement(g,{disabled:!y,onClick:function(){E().then((function(e){return console.log("@@vibhor",e),v(e)}))}}))}a(31);function D(){return r.a.createElement("p",{class:"browser-unsupported"},"Looks like you need to upgrade your browser to make Daily video calls.",r.a.createElement("br",null),"See\xa0",r.a.createElement("a",{href:"https://docs.daily.co/docs/browsers"},"this page"),"\xa0for help getting on a supported browser version.")}o.a.render(M.a.supportedBrowser().supported?r.a.createElement(P,null):r.a.createElement(D,null),document.getElementById("root"))}],[[15,1,2]]]);
//# sourceMappingURL=main.0aeb125f.chunk.js.map